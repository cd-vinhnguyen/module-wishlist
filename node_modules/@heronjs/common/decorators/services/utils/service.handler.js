"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.__serviceRunner = void 0;
const consts_1 = require("../../../consts");
const reflector_1 = require("../../../reflector");
const declarations_1 = require("../../../declarations");
/**
 * declare service metadata
 * @param type
 * @param propertyKey
 * @param fType
 * @param target
 * @param eventName
 */
const __serviceRunner = (type, propertyKey, fType = consts_1.FunctionType.func, target, eventName) => {
    let metas = (0, reflector_1.__obtain)(declarations_1.OBJECT_RUNNER, target.constructor);
    if (!metas)
        metas = { runners: [] };
    const runner = {
        type, key: propertyKey,
        reflect: eventName ? eventName : propertyKey, resolved: false,
        functionType: fType,
    };
    if (metas) {
        let { runners } = metas;
        if (!runners)
            runners = [];
        runners.push(runner);
        (0, reflector_1.__mixin)(target.constructor, { name: declarations_1.OBJECT_RUNNER, refers: metas });
    }
};
exports.__serviceRunner = __serviceRunner;
