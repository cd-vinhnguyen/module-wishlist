"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Cacheable = void 0;
const consts_1 = require("../../consts");
const reflector_1 = require("../../reflector");
const declarations_1 = require("../../declarations");
const Cacheable = (options) => {
    return (target, propertyKey) => {
        let caches = (0, reflector_1.__obtain)(declarations_1.APP_CACHES, target.constructor);
        if (!caches)
            caches = [];
        if (!caches.some(x => x.key === propertyKey))
            caches.push({
                key: propertyKey,
                value: Object.assign(Object.assign({}, options), { behavior: consts_1.CacheBehavior.CACHING })
            });
        (0, reflector_1.__mixin)(target.constructor, { name: declarations_1.APP_CACHES, refers: caches });
    };
};
exports.Cacheable = Cacheable;
