"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ProgressConsole = void 0;
const tslib_1 = require("tslib");
const progress_1 = tslib_1.__importDefault(require("progress"));
class ProgressConsole {
}
exports.ProgressConsole = ProgressConsole;
ProgressConsole.bar = (props) => {
    const { prefix, tick, callback } = props;
    const bar = new progress_1.default(`${prefix} [:bar] `, { total: tick });
    try {
        bar.tick();
        if (bar.complete) {
            callback === null || callback === void 0 ? void 0 : callback();
        }
    }
    catch (e) {
        let msg = '';
        if (e instanceof Error)
            msg = e.message;
        bar.interrupt(msg);
    }
    finally {
        bar.terminate();
    }
};
ProgressConsole.eta = (props) => {
    const { prefix, tick, callback } = props;
    const bar = new progress_1.default(`${prefix} [:bar] :etas `, { total: tick });
    try {
        bar.tick();
        if (bar.complete) {
            callback === null || callback === void 0 ? void 0 : callback();
        }
    }
    catch (e) {
        let msg = '';
        if (e instanceof Error)
            msg = e.message;
        bar.interrupt(msg);
    }
    finally {
        bar.terminate();
    }
};
